# Installation and Setup Guide

## Quick Start

### Prerequisites
- Python 3.11 or higher
- Git (for cloning repository)

### Installation Steps

1. **Clone the Repository**
```bash
git clone <repository-url>
cd 3pl-invoice-anomaly-detection
```

2. **Install Dependencies**
```bash
pip install streamlit pandas numpy plotly pdfplumber PyPDF2 python-multipart scipy openai openpyxl
```

3. **Configure Streamlit**
Create `.streamlit/config.toml`:
```toml
[server]
headless = true
address = "0.0.0.0"
port = 5000
```

4. **Set Environment Variables (Optional)**
For AI chatbot functionality:
```bash
export OPENAI_API_KEY="your-openai-api-key"
```

5. **Run the Application**
```bash
streamlit run app.py --server.port 5000
```

## File Structure After Installation

```
project/
├── app.py                    # Main application
├── invoice_analyzer.py       # Data processing
├── pdf_processor.py          # PDF extraction
├── anomaly_detector.py       # Detection algorithms
├── chatbot.py               # AI assistant
├── README.md                # Documentation
├── ANOMALY_ANALYSIS_GUIDE.md # Technical guide
├── CODE_STRUCTURE.md        # Code overview
├── INSTALLATION_GUIDE.md    # This file
└── .streamlit/
    └── config.toml          # App configuration
```

## Usage

1. **Access the Application**
   - Open browser to `http://localhost:5000`

2. **Upload Invoice Data**
   - Upload PDF invoices, CSV, or Excel files
   - Configure analysis parameters (rolling window, sigma threshold)

3. **Analyze Results**
   - View detected anomalies
   - Explore interactive charts
   - Export reports

4. **Use AI Assistant** (requires OpenAI API key)
   - Ask questions about anomalies
   - Get detailed explanations
   - Receive actionable recommendations

## Configuration Options

### Anomaly Detection Parameters
- **Rolling Months**: 3-24 (default: 9)
- **Sigma Threshold**: 1.0-5.0 (default: 3.0)

### PDF Processing
- Automatic text extraction from invoice PDFs
- Multiple extraction methods for reliability
- Vendor name detection from filename or content

## Troubleshooting

### Common Issues
1. **Import Errors**: Ensure all dependencies are installed
2. **PDF Processing**: Check PDF quality and text readability
3. **Port Conflicts**: Change port in config.toml if needed
4. **Memory Issues**: Process PDFs in smaller batches

### Getting Help
- Check console logs for detailed error messages
- Verify file formats are supported (PDF, CSV, Excel)
- Ensure OpenAI API key is valid for chatbot features